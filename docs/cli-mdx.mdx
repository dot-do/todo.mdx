---
title: cli.mdx
description: Build beautiful CLIs with MDX - Ink-style React components for terminal and markdown output
---

# cli.mdx

**MDX-based CLI framework for Bun with dual rendering to terminal and markdown.**

cli.mdx lets you define CLIs using MDX templates with React components that render to both terminal (with ANSI colors) and markdown files. Write once, output everywhere - terminal output for humans, markdown files for AI context.

Perfect for building documentation CLIs, project dashboards, and AI agent context files (CLAUDE.md, .cursorrules) that stay in sync with live data.

## Installation

```bash
npm install @todo.mdx/cli.mdx
# or
pnpm add @todo.mdx/cli.mdx
# or
bun add @todo.mdx/cli.mdx
```

## Quick Start

### 1. Create a CLI.mdx file

```mdx
---
title: My Project CLI
description: Interactive project dashboard
---

# {title}

{description}

<Stats />

## Ready to Work

<Issues.Ready limit={3} />

## Commands

<Command name="build" description="Build the project" />
<Command name="test" description="Run tests" />
<Command name="deploy" description="Deploy to production" />
```

### 2. Render to terminal

```bash
npx cli.mdx
```

Terminal output with colors:

```
My Project CLI

Interactive project dashboard

3 open Â· 2 in progress Â· 5 closed Â· 10 total (50% complete)

## Ready to Work

  â€¢ [ ] **todo-4fh** [P1]: Create cli.mdx package
  â€¢ [ ] **todo-8mg** [P1]: Export Payload via Workers RPC
  â€¢ [ ] **todo-vm0** [P1]: Workflow MDX parser

## Commands

build
  Build the project
test
  Run tests
deploy
  Deploy to production
```

### 3. Build to markdown

```bash
npx cli.mdx build -i CLI.mdx -o README.md
```

Outputs clean markdown without ANSI codes to `README.md`.

### 4. Dual output

```bash
npx cli.mdx dual -i CLI.mdx -o README.md
```

Renders to terminal AND writes markdown file in one command.

## Concepts

### How It Works

cli.mdx uses a multi-stage compilation pipeline:

```
CLI.mdx
   â”‚
   â”‚ 1. Parse frontmatter + MDX
   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  MDX Compiler   â”‚
â”‚  (@mdx-js/mdx)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ 2. Load live data
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Data Loader    â”‚
â”‚  - beads        â”‚
â”‚  - GitHub       â”‚
â”‚  - Custom       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ 3. Render components
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ React Renderer  â”‚
â”‚ (dual-mode)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â–¼             â–¼             â–¼
    Terminal      Markdown      Both
    (ANSI)         (.md)
```

### Dual Rendering

The same React components render to two targets:

**Terminal mode:**
- Uses `chalk` for ANSI color codes
- Optimized for interactive CLI output
- Colors, bold, italic, dim styles

**Markdown mode:**
- Plain markdown without ANSI codes
- Perfect for README.md, CLAUDE.md, .cursorrules
- Bold (`**text**`), italic (`_text_`), checkboxes

Example component:

```typescript
<Text style={{ bold: true, color: 'green' }}>Success!</Text>
```

Renders to:
- Terminal: `\x1b[1m\x1b[32mSuccess!\x1b[0m` (green, bold)
- Markdown: `**Success!**` (bold only)

### Live Data Injection

Components pull live data from multiple sources:

```mdx
---
beads: true  # Load from local .beads/ directory
---

<Issues.Ready />  <!-- Shows current ready-to-work issues -->
```

Data flows:
1. **beads** - Local issue tracking (`.beads/issues.jsonl`)
2. **GitHub** - GitHub Issues API (planned)
3. **Custom** - Programmatic data via `setComponentData()`

## Components

### Built-in Components

#### Issues Components

Display filtered issue lists:

```mdx
<!-- Ready to work (no blockers) -->
<Issues.Ready limit={3} />

<!-- All open issues -->
<Issues.Open limit={10} />

<!-- In progress issues -->
<Issues.InProgress />

<!-- Blocked issues -->
<Issues.Blocked />

<!-- Closed issues -->
<Issues.Closed />

<!-- Custom filters -->
<Issues status="open" priority={1} type="bug" labels={["critical"]} />
```

**Props:**

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `limit` | number | 10 | Max issues to show |
| `status` | string | all | Filter: `open`, `in_progress`, `blocked`, `closed` |
| `priority` | number | all | Filter by priority level (0-4) |
| `type` | string | all | Filter: `task`, `bug`, `feature`, `epic`, `chore` |
| `labels` | string[] | all | Filter by label names |

**Output format:**

```markdown
- [ ] **todo-4fh** [P1]: Create cli.mdx package
- [-] **todo-8mg** [P1]: Export Payload via Workers RPC (in_progress)
- [!] **todo-vm0** [P1]: Workflow MDX parser (blocked)
- [x] **todo-3y0** [P1]: Add shadcn dashboard (closed)
```

Checkboxes:
- `[ ]` - Open
- `[-]` - In Progress
- `[!]` - Blocked
- `[x]` - Closed

#### Roadmap Component

Display milestones and epics with progress:

```mdx
<Roadmap limit={5} showProgress={true} showDates={true} />
```

**Props:**

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `limit` | number | 5 | Max milestones to show |
| `showProgress` | boolean | true | Show progress stats |
| `showDates` | boolean | true | Show due dates |

**Output:**

```markdown
ğŸ¯ **v1.0 Launch**
  Description: First production release
  Progress: 8/10 (80%)
  Due: 2025-01-15

âœ… **v0.1 Alpha**
  Progress: 5/5 (100%)
```

#### Stats Component

Display aggregate statistics:

```mdx
<Stats showLeadTime={true} />
```

**Props:**

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `showLeadTime` | boolean | false | Show average lead time |

**Output:**

```markdown
**3 open** Â· 2 in progress Â· 1 blocked Â· 4 closed Â· 10 total (40% complete) Â· avg 5d lead time
```

#### Command Component

Define CLI commands (documentation):

```mdx
<Command
  name="build"
  description="Build the project for production"
  aliases={["b"]}
/>
```

**Props:**

| Prop | Type | Description |
|------|------|-------------|
| `name` | string | Command name |
| `description` | string | Command description |
| `aliases` | string[] | Command aliases |

**Output (terminal):**

```
build (aliases: b)
  Build the project for production
```

#### Agent Component

Render AI agent instructions:

```mdx
<Agent
  rules={[
    "Check 'bd ready' for unblocked tasks",
    "Always write tests first (TDD)",
    "Use existing patterns from packages/",
    "Never commit without tests passing"
  ]}
  context={{
    project: "todo.mdx",
    framework: "Bun + React",
    testRunner: "vitest"
  }}
/>
```

**Props:**

| Prop | Type | Description |
|------|------|-------------|
| `rules` | string[] | Agent rules/instructions |
| `context` | object | Context key-value pairs |

**Output:**

```markdown
Rules:
  1. Check 'bd ready' for unblocked tasks
  2. Always write tests first (TDD)
  3. Use existing patterns from packages/
  4. Never commit without tests passing

Context:
  project: "todo.mdx"
  framework: "Bun + React"
  testRunner: "vitest"
```

### Creating Custom Components

Create components that render to both terminal and markdown:

```typescript
import { Text } from '@todo.mdx/cli.mdx'
import type { ComponentProps } from '@todo.mdx/cli.mdx'

interface GreetingProps extends ComponentProps {
  name: string
  enthusiastic?: boolean
}

export function Greeting({ name, enthusiastic = false }: GreetingProps) {
  const message = `Hello, ${name}${enthusiastic ? '!' : '.'}`

  return (
    <Text style={{ color: 'cyan', bold: enthusiastic }}>
      {message}
    </Text>
  )
}
```

Use in MDX:

```mdx
---
title: Greetings
---

# {title}

<Greeting name="World" enthusiastic={true} />
```

**Terminal output:** `Hello, World!` (cyan, bold)
**Markdown output:** `**Hello, World!**` (bold)

### Component Data Management

Set data programmatically:

```typescript
import { setComponentData, getComponentData } from '@todo.mdx/cli.mdx'

// Set data for components
setComponentData({
  issues: [
    {
      id: 'issue-1',
      title: 'Build feature',
      state: 'open',
      priority: 1,
      type: 'feature',
      labels: ['enhancement'],
      createdAt: new Date().toISOString(),
      updatedAt: new Date().toISOString(),
    }
  ],
  milestones: [
    {
      id: 'v1.0',
      title: 'Version 1.0',
      state: 'open',
      progress: {
        total: 10,
        open: 3,
        in_progress: 2,
        blocked: 1,
        closed: 4,
        percent: 40,
      },
      createdAt: new Date().toISOString(),
      updatedAt: new Date().toISOString(),
    }
  ],
  stats: {
    total: 10,
    open: 3,
    in_progress: 2,
    blocked: 1,
    closed: 4,
    percent: 40,
  }
})

// Get current data
const data = getComponentData()
console.log(data.stats.total) // 10
```

## CLI Commands

### Basic Usage

```bash
# Render CLI.mdx to terminal (default)
cli.mdx
cli.mdx render
cli.mdx CLI.mdx

# Build to markdown file
cli.mdx build
cli.mdx build -i TODO.mdx -o TODO.md

# Dual output (terminal + file)
cli.mdx dual
cli.mdx dual -i ROADMAP.mdx -o ROADMAP.md
```

### Options

```bash
# Input file
-i, --input <file>    # Default: CLI.mdx

# Output file
-o, --output <file>   # Default: CLI.md

# Render mode
-m, --mode <mode>     # terminal | markdown | dual (default: terminal)

# Help
-h, --help
```

### Examples

```bash
# Terminal output
cli.mdx

# Build TODO.md from TODO.mdx
cli.mdx build -i TODO.mdx -o TODO.md

# Render to terminal AND write file
cli.mdx dual -i CLI.mdx -o README.md

# Explicit mode
cli.mdx -m markdown -i INPUT.mdx -o OUTPUT.md

# Help
cli.mdx --help
```

## Configuration

### Frontmatter Options

Configure compilation in MDX frontmatter:

```mdx
---
# Basic metadata
title: My Project
description: A wonderful project

# Data sources
beads: true              # Load from local beads

# Custom variables
project: todo.mdx
framework: Bun + React
version: 1.0.0
---

# {title}

{description}

Project: {project}
Framework: {framework}
Version: {version}
```

Variables in frontmatter are available via `{variableName}` syntax.

### Project Setup

Create a `package.json` script:

```json
{
  "scripts": {
    "cli": "cli.mdx",
    "readme": "cli.mdx build -i README.mdx -o README.md",
    "claude": "cli.mdx build -i CLAUDE.mdx -o CLAUDE.md",
    "docs": "cli.mdx dual -i TODO.mdx -o TODO.md"
  }
}
```

Run with:

```bash
npm run cli
npm run readme
npm run claude
npm run docs
```

## Programmatic API

### Compile Functions

```typescript
import {
  compile,
  renderCli,
  renderMarkdown,
  renderDual
} from '@todo.mdx/cli.mdx'

// Full compile with options
const result = await compile({
  input: 'CLI.mdx',
  output: 'CLI.md',
  mode: 'dual',        // 'terminal' | 'markdown' | 'dual'
  beads: true,         // Load beads data
})

// Shorthand: render to terminal
await renderCli({ input: 'CLI.mdx' })

// Shorthand: build to markdown
await renderMarkdown({
  input: 'CLI.mdx',
  output: 'README.md'
})

// Shorthand: both
await renderDual({
  input: 'CLI.mdx',
  output: 'README.md'
})
```

### Data Loading

```typescript
import {
  loadBeadsIssues,
  loadBeadsMilestones,
  calculateStats,
  loadAllData
} from '@todo.mdx/cli.mdx'

// Load issues from beads
const issues = await loadBeadsIssues()

// Load milestones (epics) from beads
const milestones = await loadBeadsMilestones()

// Calculate stats from issues
const stats = calculateStats(issues)

// Load everything
const data = await loadAllData()
console.log(data.issues)
console.log(data.milestones)
console.log(data.stats)
```

### Rendering API

```typescript
import React from 'react'
import {
  renderToTerminal,
  renderToMarkdown,
  Box,
  Text,
  Newline
} from '@todo.mdx/cli.mdx'

// Create element
const element = (
  <Box>
    <Text style={{ bold: true, color: 'green' }}>Success!</Text>
    <Newline />
    <Text style={{ dim: true }}>All tests passed.</Text>
  </Box>
)

// Render to terminal
const terminalOutput = renderToTerminal(element, context)
console.log(terminalOutput)

// Render to markdown
const markdownOutput = renderToMarkdown(element, context)
console.log(markdownOutput)
```

## Examples

### Interactive CLI

Create an interactive project dashboard:

```mdx
---
title: Project Dashboard
beads: true
---

# {title}

## Overview

<Stats showLeadTime={true} />

## In Progress

<Issues.InProgress />

## Ready to Work

<Issues.Ready limit={5} />

## Blocked

<Issues.Blocked />

## Commands

<Command name="bd ready" description="Show all ready-to-work issues" />
<Command name="bd create" description="Create a new issue" />
<Command name="bd close <id>" description="Close an issue" />
```

Run: `cli.mdx`

### Documentation Generator

Generate README.md from MDX:

```mdx
---
title: todo.mdx
description: MDX components that render live data to markdown
version: 1.0.0
---

# {title}

{description}

Version: {version}

## Features

- MDX-based CLI framework
- Dual rendering (terminal + markdown)
- Live data from beads, GitHub, APIs
- Built-in components for issues, roadmaps, stats

## Installation

\`\`\`bash
npm install todo.mdx
\`\`\`

## Current Roadmap

<Roadmap limit={3} showProgress={true} />

## Contributing

<Issues.Open limit={10} />
```

Build: `cli.mdx build -i README.mdx -o README.md`

### AI Agent Context

Create CLAUDE.md for AI agents:

```mdx
---
title: AI Agent Instructions
beads: true
---

# {title}

This is the development guide for todo.mdx.

<Agent
  rules={[
    "Check 'bd ready' for unblocked tasks before starting work",
    "Always write tests first (TDD approach)",
    "Use existing patterns from packages/ directory",
    "Run 'pnpm typecheck' before committing",
    "Never commit without tests passing",
    "Update ROADMAP.mdx when completing milestones"
  ]}
  context={{
    project: "todo.mdx",
    framework: "Bun + React + Cloudflare Workers",
    testRunner: "vitest",
    packageManager: "pnpm"
  }}
/>

## Current Work

<Stats />

### Ready to Work

<Issues.Ready limit={3} />

### In Progress

<Issues.InProgress />

### Blocked

<Issues.Blocked />

## Architecture

- packages/todo.mdx - Core compiler
- packages/cli.mdx - This package
- packages/roadmap.mdx - Roadmap generation
- worker/ - Cloudflare Worker backend
```

Build: `cli.mdx build -i CLAUDE.mdx -o CLAUDE.md`

### TODO Management

Create TODO.mdx that compiles to TODO.md:

```mdx
---
title: TODO
beads: true
---

# {title}

<Stats />

## In Progress

<Issues.InProgress />

## Ready to Work

<Issues.Ready limit={10} />

## Blocked

<Issues.Blocked />

## All Open Issues

<Issues.Open />
```

Dual output: `cli.mdx dual -i TODO.mdx -o TODO.md`

## Integration

### With todo.mdx

cli.mdx is part of the todo.mdx family:

```
todo.mdx ecosystem:
â”œâ”€â”€ todo.mdx      - TODO.mdx â†’ TODO.md
â”œâ”€â”€ cli.mdx       - MDX CLI framework (this package)
â”œâ”€â”€ roadmap.mdx   - ROADMAP.mdx â†’ ROADMAP.md
â”œâ”€â”€ readme.mdx    - README.mdx â†’ README.md
â”œâ”€â”€ claude.mdx    - CLAUDE.mdx â†’ CLAUDE.md
â””â”€â”€ agents.mdx    - Autonomous development workflows
```

All packages share:
- Same MDX compilation approach
- Shared component library
- Live data from beads/GitHub
- Dual rendering (terminal + markdown)

### With beads

cli.mdx automatically loads data from beads:

```mdx
---
beads: true  # Enable beads integration
---

<Issues.Ready />  <!-- Loads from .beads/issues.jsonl -->
```

Behind the scenes:

```typescript
import { loadBeadsIssues } from '@todo.mdx/cli.mdx'

// Uses beads-workflows package
const issues = await loadBeadsIssues()
// Reads from .beads/issues.jsonl in project root
```

### With GitHub

Planned GitHub integration:

```mdx
---
github:
  repo: owner/repo
  sync: true
---

<Issues.Ready />  <!-- Loads from GitHub Issues API -->
```

### Custom Integration

Bring your own data:

```typescript
import { setComponentData } from '@todo.mdx/cli.mdx/components'
import { compile } from '@todo.mdx/cli.mdx'

// Fetch from your API
const response = await fetch('https://api.example.com/issues')
const issues = await response.json()

// Set data
setComponentData({ issues })

// Compile with custom data
await compile({
  input: 'CLI.mdx',
  mode: 'terminal',
  beads: false,  // Disable beads, use custom data
})
```

## TypeScript Support

Full TypeScript support with exported types:

```typescript
import type {
  // Configuration
  CliConfig,

  // Data models
  Issue,
  Milestone,
  Stats,
  Command,
  CommandOption,

  // Component props
  ComponentProps,
  IssuesProps,
  RoadmapProps,
  CommandProps,
  AgentProps,
  StatsProps,

  // Renderer types
  RenderContext,
  TerminalNode,
  TerminalStyle,
} from '@todo.mdx/cli.mdx'

// Use in your code
const config: CliConfig = {
  input: 'CLI.mdx',
  output: 'CLI.md',
  mode: 'dual',
}

const issue: Issue = {
  id: 'issue-1',
  title: 'Build feature',
  state: 'open',
  priority: 1,
  type: 'feature',
  createdAt: new Date().toISOString(),
  updatedAt: new Date().toISOString(),
}
```

## Advanced Usage

### Custom Renderer

Build your own renderer:

```typescript
import { Text } from '@todo.mdx/cli.mdx'

function CustomTable({ data }: { data: any[] }) {
  return (
    <>
      {data.map((row, i) => (
        <React.Fragment key={i}>
          <Text style={{ bold: i === 0 }}>
            {Object.values(row).join(' | ')}
          </Text>
          {'\n'}
        </React.Fragment>
      ))}
    </>
  )
}
```

### Multi-file Output

Generate multiple files:

```typescript
import { renderMarkdown } from '@todo.mdx/cli.mdx'

// Generate multiple docs
await renderMarkdown({
  input: 'README.mdx',
  output: 'README.md'
})

await renderMarkdown({
  input: 'CLAUDE.mdx',
  output: 'CLAUDE.md'
})

await renderMarkdown({
  input: 'TODO.mdx',
  output: 'TODO.md'
})
```

Or use a build script:

```typescript
const files = [
  { input: 'README.mdx', output: 'README.md' },
  { input: 'CLAUDE.mdx', output: 'CLAUDE.md' },
  { input: 'TODO.mdx', output: 'TODO.md' },
]

for (const file of files) {
  await renderMarkdown(file)
  console.log(`âœ“ Built ${file.output}`)
}
```

### Watch Mode

Implement watch mode with chokidar:

```typescript
import { watch } from 'chokidar'
import { renderDual } from '@todo.mdx/cli.mdx'

const watcher = watch('*.mdx')

watcher.on('change', async (path) => {
  console.log(`Rebuilding ${path}...`)
  const output = path.replace('.mdx', '.md')
  await renderDual({ input: path, output })
  console.log(`âœ“ Built ${output}`)
})
```

## Troubleshooting

### beads Integration

If beads data isn't loading:

1. Check `.beads/` directory exists
2. Install `beads-workflows` peer dependency: `npm install beads-workflows`
3. Run `bd list` to verify beads is working
4. Set `beads: true` in frontmatter

### Component Not Rendering

If components aren't rendering:

1. Check component is imported/available
2. Verify data is loaded with `getComponentData()`
3. Check frontmatter syntax (must be valid YAML)
4. Ensure MDX syntax is valid

### TypeScript Errors

For TypeScript issues:

1. Install type definitions: `npm install -D @types/react`
2. Check `tsconfig.json` includes `"jsx": "react"`
3. Import types from `@todo.mdx/cli.mdx`

## Next Steps

- [todo.mdx Package](/docs/todo-mdx) - Core TODO.mdx compilation
- [roadmap.mdx Guide](/docs/roadmap-mdx) - Roadmap and milestone tracking
- [Architecture](/docs/architecture) - How todo.mdx works
- [API Reference](/docs/api) - Complete API documentation
