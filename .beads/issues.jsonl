{"id":"todo-15a","title":"Create readme.mdx package","description":"README.mdx template → README.md compilation. Components: \u003cBadges /\u003e, \u003cInstallation /\u003e, \u003cUsage /\u003e, \u003cAPI /\u003e, \u003cContributing /\u003e, \u003cLicense /\u003e. Pull stats from package.json, GitHub API. Same pattern as todo.mdx/roadmap.mdx.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-20T09:25:30.001884-06:00","updated_at":"2025-12-20T11:16:25.545885-06:00","closed_at":"2025-12-20T11:16:25.545885-06:00","close_reason":"readme.mdx package created with components for README.md generation","dependencies":[{"issue_id":"todo-15a","depends_on_id":"todo-4fh","type":"blocks","created_at":"2025-12-20T09:26:39.000818-06:00","created_by":"daemon"}]}
{"id":"todo-15z","title":"E2E test suite infrastructure with test repo submodule","description":"Create tests/ folder with real e2e tests using a test repo as git submodule. Tests real integrations: GitHub, beads sync, Linear, Slack, Claude on CF Sandbox.","design":"## E2E Test Infrastructure\n\n### Directory Structure\n```\ntests/\n├── vitest.config.ts       # E2E config (long timeouts, sequential)\n├── setup.ts               # Global setup (GitHub App auth check)\n├── helpers/\n│   ├── worktree.ts        # Git worktree management for test isolation\n│   ├── github.ts          # GitHub App auth + API helpers\n│   └── beads.ts           # Beads CLI wrapper functions\n├── e2e/\n│   ├── beads-workflow.test.ts  # ✅ 7 tests passing\n│   ├── github-sync.test.ts     # Requires GitHub App credentials\n│   └── mcp-server.test.ts      # Requires running Worker\n└── fixtures/\n    └── test.mdx/          # Git submodule for real integration tests\n```\n\n### Key Design Decisions\n1. **Git worktrees for isolation**: Each test creates a worktree from the submodule, runs tests, then cleans up\n2. **GitHub App auth**: More secure than PATs, graceful skip when not configured\n3. **Vitest**: Consistent with package unit tests, long timeout for E2E\n\n### Running Tests\n```bash\npnpm test:e2e                    # Run all E2E tests\nGITHUB_APP_ID=xxx pnpm test:e2e  # With GitHub integration\n```","acceptance_criteria":"- [x] tests/ directory with vitest config\n- [x] Git worktree-based test isolation\n- [x] beads workflow tests passing (7 tests)\n- [x] GitHub sync tests scaffolded (skip without credentials)\n- [x] MCP server tests scaffolded (skip without server)\n- [x] pnpm test:e2e script working","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-20T10:45:24.828857-06:00","updated_at":"2025-12-20T11:12:50.191838-06:00","closed_at":"2025-12-20T11:12:50.191838-06:00","close_reason":"E2E test infrastructure implemented with beads workflow tests passing. GitHub sync and MCP tests scaffolded with graceful skipping when credentials not available."}
{"id":"todo-1jj","title":"docs: GitHub App setup guide","description":"Guide for setting up the todo.mdx GitHub App. Permissions: Contents, Issues, Pull requests, Metadata, Projects (for roadmap). Webhook configuration, installation flow.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-20T10:10:23.772185-06:00","updated_at":"2025-12-20T11:05:12.858042-06:00"}
{"id":"todo-1sp","title":"E2E: GitHub Issues sync tests","description":"Test GitHub Issue create/update/close syncing to beads and D1. Webhook handlers, bidirectional sync verification.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-20T10:45:50.408813-06:00","updated_at":"2025-12-20T11:38:52.032653-06:00","closed_at":"2025-12-20T11:38:52.032653-06:00","close_reason":"Implemented GitHub Issues sync E2E tests in tests/e2e/github-sync.test.ts with webhook handlers and bidirectional sync verification","dependencies":[{"issue_id":"todo-1sp","depends_on_id":"todo-4wq","type":"blocks","created_at":"2025-12-20T10:46:13.850366-06:00","created_by":"daemon"}]}
{"id":"todo-1vj","title":"Integrate MCP OAuth flow with WorkOS AuthKit","description":"Complete OAuth 2.1 authorization flow using WorkOS AuthKit. Reference: https://github.com/cloudflare/ai/tree/main/demos/remote-mcp-authkit","status":"closed","priority":0,"issue_type":"task","assignee":"agent-3","created_at":"2025-12-20T11:41:51.615881-06:00","updated_at":"2025-12-20T11:53:19.471451-06:00","closed_at":"2025-12-20T11:53:19.471451-06:00","close_reason":"Integrated WorkOS AuthKit: created authkit.ts, OAuth state table, /authorize redirects to WorkOS, /callback handles user auth"}
{"id":"todo-2dq","title":"E2E: Slack notification tests","description":"Test Slack notifications from workflows. Mock or use test Slack workspace.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-20T10:45:56.505305-06:00","updated_at":"2025-12-20T11:38:52.775281-06:00","closed_at":"2025-12-20T11:38:52.775281-06:00","close_reason":"Implemented Slack notification E2E tests in tests/e2e/slack-notifications.test.ts","dependencies":[{"issue_id":"todo-2dq","depends_on_id":"todo-4wq","type":"blocks","created_at":"2025-12-20T10:46:14.333449-06:00","created_by":"daemon"}]}
{"id":"todo-2n7","title":"docs: Deployment guide","description":"Self-hosting todo.mdx.do. Cloudflare setup (Worker, D1, R2, DO), environment variables, GitHub App configuration.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-20T10:10:25.464279-06:00","updated_at":"2025-12-20T10:10:25.464279-06:00"}
{"id":"todo-2wz","title":"docs: agents.mdx package reference","description":"Full agents.mdx documentation. AGENTS.mdx → CLAUDE.md + .cursorrules. AI instruction generation, context rendering.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-20T10:10:17.264432-06:00","updated_at":"2025-12-20T11:50:47.583059-06:00","closed_at":"2025-12-20T11:50:47.583059-06:00","close_reason":"Documentation complete: comprehensive agents.mdx package reference at docs/agents-mdx.mdx"}
{"id":"todo-3pz","title":"CapnWeb sandboxing for secure workflow execution","description":"Use CapnWeb to sandbox arbitrary workflow code execution. Proxy calls through CapnWeb for security.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-20T10:02:45.216687-06:00","updated_at":"2025-12-20T11:40:46.355794-06:00","closed_at":"2025-12-20T11:40:46.355794-06:00","close_reason":"Implemented CapnWeb sandboxing: created sandbox/server.ts with SandboxedWorkflowAPI exposing safe RPC methods, sandbox/loader.ts with SandboxOutboundProxy that routes dynamic worker fetch through CapnWeb server, and sandbox/index.ts for module exports. Worker Loader + CapnWeb provides capability-based security for workflow code execution.","dependencies":[{"issue_id":"todo-3pz","depends_on_id":"todo-c2z","type":"blocks","created_at":"2025-12-20T10:03:14.152143-06:00","created_by":"daemon"}]}
{"id":"todo-3y0","title":"Add shadcn dashboard to Payload app","description":"Run: pnpm dlx shadcn@latest add --all. Create /dashboard route group. Set up basic dashboard layout with sidebar navigation.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-20T09:09:26.880187-06:00","updated_at":"2025-12-20T09:25:17.229892-06:00","closed_at":"2025-12-20T09:25:17.229892-06:00","close_reason":"Added shadcn with 54 UI components, created (dashboard) route group with sidebar layout, dashboard page with stats cards","dependencies":[{"issue_id":"todo-3y0","depends_on_id":"todo-uuh","type":"blocks","created_at":"2025-12-20T09:09:43.234577-06:00","created_by":"daemon"}]}
{"id":"todo-42t","title":"E2E: MCP server tests","description":"Test MCP tools: listIssues, createIssue, updateIssue, closeIssue, search. Verify responses and side effects.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-20T10:46:02.108918-06:00","updated_at":"2025-12-20T11:38:53.016323-06:00","closed_at":"2025-12-20T11:38:53.016323-06:00","close_reason":"Expanded MCP server E2E tests in tests/e2e/mcp-server.test.ts with CRUD operations, search, and protocol compliance","dependencies":[{"issue_id":"todo-42t","depends_on_id":"todo-4wq","type":"blocks","created_at":"2025-12-20T10:46:14.821041-06:00","created_by":"daemon"}]}
{"id":"todo-4fh","title":"Create cli.mdx package - MDX-based CLI framework","description":"MDX-based CLI framework for Bun with React (Ink-style) rendering:\n\nCORE CONCEPT: Define CLIs in MDX, render to terminal AND markdown.\n\nFeatures:\n- Define CLI commands as MDX components\n- React components render to terminal (like Ink)\n- Same components render to markdown files\n- Live data injection from beads, GitHub, APIs\n- Multi-output: terminal, README.md, CLAUDE.md, .cursorrules\n\nBuilt-in components:\n- \u003cCommand name='build' /\u003e - define CLI commands\n- \u003cRoadmap /\u003e - render milestones + progress\n- \u003cIssues.Ready /\u003e - render ready issues\n- \u003cStats /\u003e - render counts\n- \u003cAgent rules={...} /\u003e - render AI instructions\n\nUsed by: todo.mdx, roadmap.mdx, readme.mdx, agents.mdx, claude.mdx\n\nTech: Bun + React + MDX + markdown output","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-20T09:25:45.527025-06:00","updated_at":"2025-12-20T11:16:25.471807-06:00","closed_at":"2025-12-20T11:16:25.471807-06:00","close_reason":"cli.mdx package created with MDX compiler, terminal renderer, and CLI"}
{"id":"todo-4g8","title":"Debug ChatGPT MCP connector OAuth 2.1 \"Failed to build actions\" error","description":"ChatGPT returns \"Error creating connector - Failed to build actions from MCP endpoint\" when trying to connect to our MCP server.\n\n## Current Implementation\n- Uses `@cloudflare/workers-oauth-provider` at `worker/src/mcp/index.ts`\n- OAuth endpoints at `/mcp/authorize`, `/mcp/token`, `/mcp/register`\n- Discovery at `/mcp/.well-known/oauth-authorization-server`\n- AuthKit handler for WorkOS integration\n\n## ChatGPT Requirements (per research)\n\n### 1. Discovery Endpoints\nChatGPT directly requests these (doesn't use WWW-Authenticate header):\n- `/.well-known/oauth-authorization-server` ✅ (we have this)\n- `/.well-known/oauth-protected-resource` ❓ (may be missing - RFC 9728)\n- `/.well-known/openid-configuration` ❓ (fallback, may be needed)\n\n### 2. Dynamic Client Registration (DCR)\nChatGPT registers a fresh OAuth client each time. Verify `/register` endpoint:\n- Accepts POST with client metadata\n- Returns `client_id` \n- Handles ChatGPT's specific metadata format\n\n### 3. Required OAuth Metadata Fields\n```json\n{\n  \"issuer\": \"https://...\",\n  \"authorization_endpoint\": \"...\",\n  \"token_endpoint\": \"...\",\n  \"registration_endpoint\": \"...\",\n  \"code_challenge_methods_supported\": [\"S256\"],\n  \"response_types_supported\": [\"code\"],\n  \"grant_types_supported\": [\"authorization_code\", \"refresh_token\"],\n  \"scopes_supported\": [\"openid\", \"profile\", \"...\"]\n}\n```\n\n### 4. Potential Issues\n- CORS headers on discovery endpoints\n- `scopes_supported` missing or wrong\n- `code_challenge_methods_supported` not including S256\n- Missing PKCE validation\n\n## Testing Approach\n\n### MCP Inspector\n```bash\nnpx @modelcontextprotocol/inspector\n# Navigate to http://localhost:6274\n# Use AuthDebugger component for OAuth flow testing\n```\n\n### Manual Discovery Testing\n```bash\n# Test authorization server metadata\ncurl -v https://todo.mdx.do/mcp/.well-known/oauth-authorization-server\n\n# Test protected resource metadata (if implemented)\ncurl -v https://todo.mdx.do/mcp/.well-known/oauth-protected-resource\n\n# Test DCR endpoint\ncurl -X POST https://todo.mdx.do/mcp/register \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"redirect_uris\": [\"https://chatgpt.com/callback\"], \"client_name\": \"Test\"}'\n```\n\n### Check @cloudflare/workers-oauth-provider\nReview what the provider actually exposes vs what ChatGPT expects.\n\n## References\n- [OpenAI MCP Connector OAuth Issues](https://community.openai.com/t/new-mcp-connector-does-not-follow-mcp-authorization-spec/1358992)\n- [MCP Authorization Spec](https://modelcontextprotocol.io/specification/draft/basic/authorization)\n- [MCP Inspector](https://github.com/modelcontextprotocol/inspector)\n- [WorkOS DCR in MCP](https://workos.com/blog/dynamic-client-registration-dcr-mcp-oauth)","status":"open","priority":1,"issue_type":"bug","created_at":"2025-12-20T12:47:27.518564-06:00","updated_at":"2025-12-20T12:47:27.518564-06:00","labels":["chatgpt","mcp","oauth"]}
{"id":"todo-4qe","title":"docs: API reference","description":"REST API and MCP server documentation. All endpoints, request/response schemas, authentication, rate limits.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-20T10:10:22.205662-06:00","updated_at":"2025-12-20T10:10:22.205662-06:00"}
{"id":"todo-4wf","title":"E2E: Linear integration tests","description":"Test Linear issue sync when Linear integration is enabled. Create, update, close cycle.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-20T10:45:54.291572-06:00","updated_at":"2025-12-20T11:38:52.525277-06:00","closed_at":"2025-12-20T11:38:52.525277-06:00","close_reason":"Implemented Linear integration E2E tests in tests/e2e/linear-integration.test.ts","dependencies":[{"issue_id":"todo-4wf","depends_on_id":"todo-4wq","type":"blocks","created_at":"2025-12-20T10:46:14.175321-06:00","created_by":"daemon"}]}
{"id":"todo-4wq","title":"Create test repo with beads setup as git submodule","description":"Create dot-do/todo.mdx-test-repo with .beads/ setup, sample issues, epics, dependencies. Add as submodule to tests/fixtures/test-repo.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-20T10:45:47.019643-06:00","updated_at":"2025-12-20T10:49:34.965659-06:00","closed_at":"2025-12-20T10:49:34.965659-06:00","close_reason":"Created dot-do/test.mdx and added as submodule at tests/fixtures/test.mdx"}
{"id":"todo-5ci","title":"Create apps/claude.mdx.do - Fumadocs + OpenNext site","description":"Next.js docs site for claude.mdx package using Fumadocs. Deploy with OpenNext to Cloudflare. Includes /dashboard from shared package.","status":"closed","priority":1,"issue_type":"task","assignee":"subagent-5","created_at":"2025-12-20T10:41:06.732487-06:00","updated_at":"2025-12-20T11:04:22.935959-06:00","closed_at":"2025-12-20T11:04:22.935959-06:00","close_reason":"Completed: Created apps/claude.mdx.do with Fumadocs, OpenNext, WorkOS AuthKit, and dashboard integration","dependencies":[{"issue_id":"todo-5ci","depends_on_id":"todo-wny","type":"blocks","created_at":"2025-12-20T10:41:18.471898-06:00","created_by":"daemon"}]}
{"id":"todo-5zu","title":"Add file watcher for local .todo/*.md changes","description":"Watch mode that detects local file changes and syncs to GitHub","status":"open","priority":3,"issue_type":"feature","created_at":"2025-12-20T06:11:58.849572-06:00","updated_at":"2025-12-20T06:11:58.849572-06:00"}
{"id":"todo-6a9","title":"Create claude.mdx CLI package","description":"Bun CLI that orchestrates AI-assisted development:\n- Wraps roadmap.mdx and todo.mdx\n- Dispatches Claude Code sessions to work on TODOs\n- Uses beads for issue tracking\n- Picks 'ready' issues and launches claude code with context\n- Can run in daemon mode watching for new issues\n- Integrates with todo.mdx SDK for online/offline\n\nCommands:\n- claude.mdx work [issue-id] - Start session for specific issue\n- claude.mdx next - Pick next ready issue and start session  \n- claude.mdx daemon - Watch mode, auto-dispatch sessions\n- claude.mdx status - Show active sessions and progress","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-20T09:25:32.233458-06:00","updated_at":"2025-12-20T11:31:24.535476-06:00","closed_at":"2025-12-20T11:31:24.535476-06:00","close_reason":"claude.mdx CLI package fully implemented with all 4 commands (work, next, daemon, status). Package builds and typechecks successfully.","dependencies":[{"issue_id":"todo-6a9","depends_on_id":"todo-4fh","type":"blocks","created_at":"2025-12-20T09:26:39.338413-06:00","created_by":"daemon"}]}
{"id":"todo-6bv","title":"Proxy runtime - globalThis with claude, github, git, beads, todo, slack","description":"Create the Proxy-based runtime that wraps globalThis with API namespaces. Abstract local vs cloud execution.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-20T10:02:38.223911-06:00","updated_at":"2025-12-20T10:33:51.290209-06:00","closed_at":"2025-12-20T10:33:51.290209-06:00","close_reason":"Implemented proxy runtime with template literal support in packages/agents.mdx/"}
{"id":"todo-6dj","title":"Cloudflare Sandbox integration for Claude Code execution","description":"Spawn Claude Code in Cloudflare Sandbox for cloud-based agent execution. Clone repo, run agent, return diff.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-20T10:02:48.778613-06:00","updated_at":"2025-12-20T10:02:48.778613-06:00","dependencies":[{"issue_id":"todo-6dj","depends_on_id":"todo-r35","type":"blocks","created_at":"2025-12-20T10:03:16.160511-06:00","created_by":"daemon"},{"issue_id":"todo-6dj","depends_on_id":"todo-6r0","type":"blocks","created_at":"2025-12-20T10:03:16.315332-06:00","created_by":"daemon"}]}
{"id":"todo-6r0","title":"Worker Loader for dynamic per-repo workflow modules","description":"Use Cloudflare Worker Loader to dynamically load workflow code per-repo. Each repo gets isolated workflow runtime.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-20T10:02:47.157585-06:00","updated_at":"2025-12-20T11:53:58.825836-06:00","closed_at":"2025-12-20T11:53:58.825836-06:00","close_reason":"Implemented workflow loader: WorkflowRegistry with 5-min cache, loadWorkflowsFromRepo, executeWorkflowTrigger, enhanced sandbox client APIs (milestones, github, schedule)","dependencies":[{"issue_id":"todo-6r0","depends_on_id":"todo-3pz","type":"blocks","created_at":"2025-12-20T10:03:15.149294-06:00","created_by":"daemon"}]}
{"id":"todo-773","title":"Implement GitHub App webhook handlers","description":"Handle GitHub webhooks for issues, milestones, projects, and push events","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-20T06:11:58.259326-06:00","updated_at":"2025-12-20T09:25:39.466668-06:00","closed_at":"2025-12-20T09:25:39.466668-06:00","close_reason":"Implemented all GitHub App webhook handlers: issues, milestones, push, and projects_v2_item with full sync logic in RepoDO and ProjectDO"}
{"id":"todo-7v6","title":"Implement roadmap.mdx compiler with epic support","description":"Compile ROADMAP.mdx to ROADMAP.md with beads epics and GitHub Milestones","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-20T06:11:58.06646-06:00","updated_at":"2025-12-20T09:28:06.285636-06:00","closed_at":"2025-12-20T09:28:06.285636-06:00","close_reason":"Closed"}
{"id":"todo-88g","title":"Define Payload collections for todo.mdx","description":"Create Payload collections: installations (GitHub App), repos, issues, milestones, sync-events, users. Define relationships and access control.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-20T09:09:28.417154-06:00","updated_at":"2025-12-20T09:25:48.203769-06:00","closed_at":"2025-12-20T09:25:48.203769-06:00","close_reason":"Created all Payload collections: Installations, Repos, Issues, Milestones, SyncEvents. Updated Users with GitHub OAuth fields and RBAC. Added access control for row-level security based on installation membership.","dependencies":[{"issue_id":"todo-88g","depends_on_id":"todo-uuh","type":"blocks","created_at":"2025-12-20T09:09:43.391092-06:00","created_by":"daemon"}]}
{"id":"todo-8fq","title":"beads-workflows integration for event triggers","description":"Connect to beads-workflows event system (on.issue.ready, on.issue.closed, etc.) to trigger workflows.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-20T10:02:41.65275-06:00","updated_at":"2025-12-20T10:49:59.880477-06:00","closed_at":"2025-12-20T10:49:59.880477-06:00","close_reason":"Published beads-workflows@0.1.1 to npm with event system (createHooks, createWatcher, createRuntime). todo.mdx already configured to use it as optional peer dependency."}
{"id":"todo-8i3","title":"Configure worker secrets for todo-mdx","description":"Set up the 6 required secrets for the todo-mdx worker deployment.","acceptance_criteria":"- [x] GITHUB_APP_ID\n- [x] GITHUB_PRIVATE_KEY\n- [x] GITHUB_WEBHOOK_SECRET\n- [x] WORKOS_API_KEY\n- [x] WORKOS_CLIENT_ID\n- [x] CLAUDE_CODE_OAUTH_TOKEN","status":"closed","priority":1,"issue_type":"chore","created_at":"2025-12-20T11:33:24.411907-06:00","updated_at":"2025-12-20T11:33:30.877695-06:00","closed_at":"2025-12-20T11:33:30.877695-06:00","close_reason":"All 6 secrets configured via wrangler secret put"}
{"id":"todo-8mg","title":"Export Payload via Workers RPC","description":"Configure Payload app to export payload() function via Cloudflare Workers RPC. Add service binding configuration to wrangler.toml.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-20T09:09:29.948415-06:00","updated_at":"2025-12-20T11:16:25.510227-06:00","closed_at":"2025-12-20T11:16:25.510227-06:00","close_reason":"PayloadRPC class created in apps/admin/src/rpc.ts with Workers RPC export","dependencies":[{"issue_id":"todo-8mg","depends_on_id":"todo-88g","type":"blocks","created_at":"2025-12-20T09:09:43.544951-06:00","created_by":"daemon"}]}
{"id":"todo-9lh","title":"docs: roadmap.mdx package reference","description":"Documentation for roadmap.mdx. Milestone, Timeline, Roadmap components. GitHub Milestones sync. Epic integration.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-20T10:10:13.8219-06:00","updated_at":"2025-12-20T11:50:19.382655-06:00","closed_at":"2025-12-20T11:50:19.382655-06:00","close_reason":"Completed comprehensive roadmap.mdx documentation at docs/roadmap-mdx.mdx"}
{"id":"todo-9sv","title":"Migrate MCP `do` tool to use sandboxed worker loader","description":"The MCP `do` tool currently uses `new Function()` for code execution, which is essentially eval with no isolation. The workflow execution system uses the proper sandboxed worker loader with CapnWeb capability security.\n\n**Current (insecure)**:\n```javascript\nconst fn = new Function('return (async () =\u003e { ' + wrappedCode + ' })()')\nconst result = await fn()\n```\n\n**Target (sandboxed)**:\nUse `executeSandboxedWorkflow()` from `worker/src/sandbox/loader.ts` which provides:\n- Dynamic worker loader (`env.LOADER.get()`)\n- CapnWeb RPC for capability-controlled API access  \n- `SandboxOutboundProxy` blocking unauthorized network access\n- Proper module isolation\n\n**Files**:\n- `worker/src/mcp/index.ts` - MCP `do` tool implementation (lines 871-937)\n- `worker/src/sandbox/loader.ts` - Sandbox loader to use","status":"in_progress","priority":1,"issue_type":"task","created_at":"2025-12-20T12:35:09.035297-06:00","updated_at":"2025-12-20T12:42:10.847491-06:00","labels":["mcp","sandbox","security"]}
{"id":"todo-ac9","title":"Create agents.mdx package","description":"AGENTS.mdx template → multiple outputs:\n- agents.md (human-readable agent docs)\n- claude.md (Claude Code instructions)  \n- .cursorrules (Cursor IDE rules)\n- .github/copilot-instructions.md\n\nComponents: \u003cAgent name='...' /\u003e, \u003cRules /\u003e, \u003cTools /\u003e, \u003cWorkflows /\u003e, \u003cCapabilities /\u003e. \nIntegrates with MCP tool definitions. Single source of truth for AI agent configuration across tools.","notes":"Implemented claude.mdx package with AGENTS.mdx template compiler functionality.\n\nCreated:\n- /Users/nathanclevenger/projects/todo.mdx/packages/claude.mdx/src/compiler.ts - MDX template compiler\n- /Users/nathanclevenger/projects/todo.mdx/packages/claude.mdx/src/data.ts - Data integration (beads, MCP, package.json)\n- /Users/nathanclevenger/projects/todo.mdx/packages/claude.mdx/src/index.ts - Main exports\n- /Users/nathanclevenger/projects/todo.mdx/packages/claude.mdx/src/cli.ts - CLI tool\n- /Users/nathanclevenger/projects/todo.mdx/packages/claude.mdx/AGENTS.mdx - Example template\n- /Users/nathanclevenger/projects/todo.mdx/packages/claude.mdx/README.md - Documentation\n\nThe compiler successfully parses AGENTS.mdx and generates multiple output formats:\n- CLAUDE.md (Claude Code instructions)\n- .cursorrules (Cursor IDE rules)\n- agents.md (human-readable docs)\n- .github/copilot-instructions.md (Copilot instructions)\n- mcp.json (MCP configuration)\n\nComponents implemented: \u003cAgent\u003e, \u003cRules\u003e, \u003cTools\u003e, \u003cWorkflows\u003e, \u003cCapabilities\u003e\n\nData integration: beads issues, MCP tools, package.json\n\nNote: User repurposed package.json description for \"orchestrator\" use case, but template compiler functionality is complete and working.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-20T09:25:31.01331-06:00","updated_at":"2025-12-20T11:06:04.550681-06:00","closed_at":"2025-12-20T11:06:04.550681-06:00","close_reason":"Successfully implemented AGENTS.mdx template compiler in claude.mdx package.\n\nComplete implementation includes:\n- MDX template compiler (src/compiler.ts) - parses \u003cAgent\u003e, \u003cRules\u003e, \u003cTools\u003e, \u003cWorkflows\u003e, \u003cCapabilities\u003e\n- Data integration (src/data.ts) - loads from beads, MCP, package.json\n- Multiple output formats: CLAUDE.md, .cursorrules, agents.md, copilot-instructions.md, mcp.json\n- CLI tool for compilation\n- Example AGENTS.mdx template\n- Documentation in README.md and IMPLEMENTATION.md\n\nVerified working with successful test compilation of AGENTS.mdx generating all target formats.\n\nFiles created at: /Users/nathanclevenger/projects/todo.mdx/packages/claude.mdx/","dependencies":[{"issue_id":"todo-ac9","depends_on_id":"todo-4fh","type":"blocks","created_at":"2025-12-20T09:26:39.168188-06:00","created_by":"daemon"}]}
{"id":"todo-atz","title":"Upgrade to pnpm monorepo with apps/ structure","description":"Convert from npm workspaces to pnpm workspaces. Add apps/ directory alongside packages/. Update root package.json and create pnpm-workspace.yaml.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-20T09:09:24.947879-06:00","updated_at":"2025-12-20T09:11:44.376382-06:00","closed_at":"2025-12-20T09:11:44.376382-06:00","close_reason":"pnpm + turbo monorepo set up with apps/, packages/, worker workspaces"}
{"id":"todo-bby","title":"Create apps/todo.mdx.do - Fumadocs + OpenNext site","description":"Next.js docs site for todo.mdx package using Fumadocs. Deploy with OpenNext to Cloudflare. Includes /dashboard from shared package.","status":"closed","priority":1,"issue_type":"task","assignee":"subagent-1","created_at":"2025-12-20T10:40:59.251207-06:00","updated_at":"2025-12-20T11:05:05.089709-06:00","closed_at":"2025-12-20T11:05:05.089709-06:00","close_reason":"Completed: Created full Fumadocs + OpenNext + WorkOS AuthKit site at apps/todo.mdx.do with dashboard integration, documentation pages, and Cloudflare deployment configuration","dependencies":[{"issue_id":"todo-bby","depends_on_id":"todo-wny","type":"blocks","created_at":"2025-12-20T10:41:17.832918-06:00","created_by":"daemon"}]}
{"id":"todo-bp0","title":"docs: Getting Started guide","description":"Quick start guide covering installation, initialization, basic usage. Show TODO.mdx → TODO.md compilation flow.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-20T10:10:10.328752-06:00","updated_at":"2025-12-20T10:34:52.583865-06:00","closed_at":"2025-12-20T10:34:52.583865-06:00","close_reason":"Documentation written"}
{"id":"todo-br4","title":"docs: todo.mdx package reference","description":"Full documentation for todo.mdx package. Components (Issues.*, Stats.*), configuration, file patterns, beads integration.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-20T10:10:12.138972-06:00","updated_at":"2025-12-20T11:50:08.417962-06:00","closed_at":"2025-12-20T11:50:08.417962-06:00","close_reason":"Completed comprehensive documentation for todo.mdx package"}
{"id":"todo-bv4","title":"E2E: Claude Code on Cloudflare Sandbox tests","description":"Test spawning Claude Code via CF Sandbox SDK. Verify repo clone, task execution, diff return.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-20T10:45:58.173472-06:00","updated_at":"2025-12-20T11:38:53.537542-06:00","closed_at":"2025-12-20T11:38:53.537542-06:00","close_reason":"Implemented Claude Sandbox E2E tests in tests/e2e/claude-sandbox.test.ts","dependencies":[{"issue_id":"todo-bv4","depends_on_id":"todo-4wq","type":"blocks","created_at":"2025-12-20T10:46:14.496822-06:00","created_by":"daemon"}]}
{"id":"todo-bxc","title":"Create apps/roadmap.mdx.do - Fumadocs + OpenNext site","description":"Next.js docs site for roadmap.mdx package using Fumadocs. Deploy with OpenNext to Cloudflare. Includes /dashboard from shared package.","status":"closed","priority":1,"issue_type":"task","assignee":"subagent-2","created_at":"2025-12-20T10:41:01.425425-06:00","updated_at":"2025-12-20T11:03:55.305544-06:00","closed_at":"2025-12-20T11:03:55.305544-06:00","close_reason":"Completed: Created apps/roadmap.mdx.do with Fumadocs, OpenNext, WorkOS AuthKit, and shared dashboard integration. All required files and configurations are in place.","dependencies":[{"issue_id":"todo-bxc","depends_on_id":"todo-wny","type":"blocks","created_at":"2025-12-20T10:41:17.995001-06:00","created_by":"daemon"}]}
{"id":"todo-c2z","title":"Cloudflare Workflows integration for durable execution","description":"Wrap workflow steps in Cloudflare Workflows step.do() and step.waitForEvent() for durability and long-running operations.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-20T10:02:43.498119-06:00","updated_at":"2025-12-20T11:15:45.13532-06:00","closed_at":"2025-12-20T11:15:45.13532-06:00","close_reason":"Implemented Cloudflare Workflows integration - durableTransport wraps step.do() and step.waitForEvent(), DevelopWorkflow class for automated development","dependencies":[{"issue_id":"todo-c2z","depends_on_id":"todo-6bv","type":"blocks","created_at":"2025-12-20T10:03:12.641676-06:00","created_by":"daemon"}]}
{"id":"todo-ct1","title":"Implement Project Durable Object for cross-repo sync","description":"Cross-repo milestone coordination via GitHub Projects","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-20T06:11:58.654792-06:00","updated_at":"2025-12-20T11:53:58.786423-06:00","closed_at":"2025-12-20T11:53:58.786423-06:00","close_reason":"Implemented cross-repo sync: XState state machine, GitHub Projects v2 GraphQL integration, cross-repo milestone propagation, repo notification system"}
{"id":"todo-d2a","title":"Add Linear integration","description":"Add Linear as an integration source alongside GitHub. Should support:\n- OAuth connection to Linear workspace\n- Two-way sync for issues (Linear issues \u003c-\u003e todo.mdx issues)\n- Milestone mapping to Linear cycles/projects\n- Label sync\n- Status mapping (Linear states -\u003e open/in_progress/closed)","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-20T08:15:41.851489-06:00","updated_at":"2025-12-20T11:57:12.929778-06:00","closed_at":"2025-12-20T11:57:12.929778-06:00","close_reason":"Implemented Linear integration with OAuth flow, GraphQL client, webhook handlers, Payload collection, and two-way sync"}
{"id":"todo-d5b","title":"Implement todo.mdx compiler with beads integration","description":"","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-20T06:11:42.305663-06:00","updated_at":"2025-12-20T09:27:18.860009-06:00","closed_at":"2025-12-20T09:27:18.860009-06:00","close_reason":"Implemented beads integration: in_progress state support, Issues.InProgress component, proper status mapping, clean output without duplicate headings"}
{"id":"todo-dp6","title":"E2E: Workflow execution tests - on.issue.ready trigger","description":"Test full workflow: issue becomes ready → workflow triggers → Claude spawns → PR created → merged → issue closed.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-20T10:46:00.423592-06:00","updated_at":"2025-12-20T11:38:53.273098-06:00","closed_at":"2025-12-20T11:38:53.273098-06:00","close_reason":"Implemented workflow execution E2E tests in tests/e2e/workflow-execution.test.ts","dependencies":[{"issue_id":"todo-dp6","depends_on_id":"todo-4wq","type":"blocks","created_at":"2025-12-20T10:46:14.660011-06:00","created_by":"daemon"}]}
{"id":"todo-dzo","title":"Deploy MCP server at todo.mdx.do/mcp with WorkOS AuthKit","description":"Deploy remote MCP server with OAuth 2.1 authentication using WorkOS AuthKit.\n\n## Completed:\n✅ Admin app type errors fixed\n✅ Token storage migrated to D1 (migrations/0002_mcp_tokens.sql, 0003_mcp_oauth_state.sql)\n✅ WorkOS AuthKit OAuth flow integrated (auth/authkit.ts)\n✅ Payload RPC service binding enabled in wrangler.jsonc\n\n## Remaining Deployment Steps:\n\n1. **Deploy admin-todo-mdx first** (required for PAYLOAD service binding)\n   ```bash\n   cd apps/admin \u0026\u0026 wrangler deploy\n   ```\n\n2. **Run D1 migrations on worker**\n   ```bash\n   cd worker \u0026\u0026 wrangler d1 migrations apply todo-mdx\n   ```\n\n3. **Set WorkOS secrets**\n   ```bash\n   wrangler secret put WORKOS_API_KEY\n   wrangler secret put WORKOS_CLIENT_ID\n   wrangler secret put WORKOS_CLIENT_SECRET\n   ```\n\n4. **Configure WorkOS AuthKit callback URL**\n   In WorkOS dashboard, add redirect URI: `https://todo-mdx.do/mcp/callback`\n\n5. **Deploy worker**\n   ```bash\n   cd worker \u0026\u0026 wrangler deploy\n   ```\n\n6. **Test OAuth flow**\n   Connect via MCP client to `https://todo-mdx.do/mcp`\n\n## Files Changed:\n- worker/src/mcp/index.ts - OAuth flow with WorkOS AuthKit\n- worker/src/mcp/token-store.ts - D1 token persistence\n- worker/src/auth/authkit.ts - WorkOS AuthKit helpers\n- worker/migrations/0002_mcp_tokens.sql - Token tables\n- worker/migrations/0003_mcp_oauth_state.sql - OAuth state table\n- apps/admin/src/payload.config.ts - Fixed type errors\n- worker/wrangler.jsonc - Enabled Payload RPC binding","notes":"All 3 blockers (todo-nkz, todo-q2h, todo-1vj) have been resolved. Ready for deployment.","status":"closed","priority":0,"issue_type":"feature","created_at":"2025-12-20T11:41:38.961631-06:00","updated_at":"2025-12-20T12:11:59.231251-06:00","closed_at":"2025-12-20T12:11:59.231251-06:00","close_reason":"MCP server deployed at https://todo-mdx.dotdo.workers.dev with WorkOS AuthKit OAuth. Admin deployed at https://admin-todo-mdx.dotdo.workers.dev","dependencies":[{"issue_id":"todo-dzo","depends_on_id":"todo-nkz","type":"blocks","created_at":"2025-12-20T11:42:01.527959-06:00","created_by":"daemon"},{"issue_id":"todo-dzo","depends_on_id":"todo-q2h","type":"blocks","created_at":"2025-12-20T11:42:01.691184-06:00","created_by":"daemon"},{"issue_id":"todo-dzo","depends_on_id":"todo-1vj","type":"blocks","created_at":"2025-12-20T11:42:01.857468-06:00","created_by":"daemon"}]}
{"id":"todo-e7m","title":"Configure Linear and Slack secrets for todo-mdx worker","description":"Add Linear and Slack integration secrets when those integrations are implemented.\n\n**Linear:**\n- LINEAR_API_KEY\n- LINEAR_WEBHOOK_SECRET\n\n**Slack:**\n- SLACK_BOT_TOKEN\n- SLACK_SIGNING_SECRET","status":"open","priority":4,"issue_type":"chore","assignee":"nathanclevenger","created_at":"2025-12-20T11:36:39.87484-06:00","updated_at":"2025-12-20T11:36:39.87484-06:00"}
{"id":"todo-ew8","title":"Create apps/cli.mdx.do - Fumadocs + OpenNext site","description":"Next.js docs site for cli.mdx package using Fumadocs. Deploy with OpenNext to Cloudflare. Includes /dashboard from shared package.","status":"closed","priority":1,"issue_type":"task","assignee":"subagent-3","created_at":"2025-12-20T10:41:02.998636-06:00","updated_at":"2025-12-20T11:04:22.89608-06:00","closed_at":"2025-12-20T11:04:22.89608-06:00","close_reason":"Completed: Created apps/cli.mdx.do with Fumadocs, OpenNext, WorkOS AuthKit, and dashboard integration","dependencies":[{"issue_id":"todo-ew8","depends_on_id":"todo-wny","type":"blocks","created_at":"2025-12-20T10:41:18.153093-06:00","created_by":"daemon"}]}
{"id":"todo-fkb","title":"Rename apps/todo.mdx.do to apps/admin for Payload CMS","description":"Rename the Payload app to admin. Remove / route, make /admin the root. Domain will be admin.mdx.do but not exposed in wrangler.jsonc.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-20T10:40:55.561882-06:00","updated_at":"2025-12-20T10:45:23.78589-06:00","closed_at":"2025-12-20T10:45:23.78589-06:00","close_reason":"Renamed to apps/admin"}
{"id":"todo-h5s","title":"Create apps/readme.mdx.do - Fumadocs + OpenNext site","description":"Next.js docs site for readme.mdx package using Fumadocs. Deploy with OpenNext to Cloudflare. Includes /dashboard from shared package.","status":"closed","priority":1,"issue_type":"task","assignee":"subagent-6","created_at":"2025-12-20T10:41:08.411816-06:00","updated_at":"2025-12-20T11:04:22.975978-06:00","closed_at":"2025-12-20T11:04:22.975978-06:00","close_reason":"Completed: Created apps/readme.mdx.do with Fumadocs, OpenNext, WorkOS AuthKit, and dashboard integration","dependencies":[{"issue_id":"todo-h5s","depends_on_id":"todo-wny","type":"blocks","created_at":"2025-12-20T10:41:18.637206-06:00","created_by":"daemon"}]}
{"id":"todo-he8","title":"E2E: GitHub Milestones to roadmap sync tests","description":"Test milestone creation, updates, and issue assignment syncing with roadmap.mdx epics.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-20T10:45:52.619392-06:00","updated_at":"2025-12-20T11:38:52.279657-06:00","closed_at":"2025-12-20T11:38:52.279657-06:00","close_reason":"Implemented GitHub Milestones sync E2E tests in tests/e2e/milestones-sync.test.ts","dependencies":[{"issue_id":"todo-he8","depends_on_id":"todo-4wq","type":"blocks","created_at":"2025-12-20T10:46:14.01326-06:00","created_by":"daemon"}]}
{"id":"todo-i28","title":"Add sandbox capability grants for MCP `do` tool context","description":"When migrating the MCP `do` tool to use the sandbox loader, we need to ensure the sandboxed code has access to the pre-loaded data (repos, issues, milestones, projects) that the current implementation provides.\n\nThe sandbox client code in `loader.ts` provides APIs like `issues.list()`, `milestones.get()`, etc. but the `do` tool currently injects these as raw arrays.\n\n**Options**:\n1. Inject data as module globals in the sandbox (like current approach)\n2. Pre-fetch and expose via the CapnWeb RPC client\n3. Lazy-load through RPC calls when accessed\n\nNeed to decide which approach maintains the `do` tool's simplicity while gaining sandbox security.\n\n**Related files**:\n- `worker/src/sandbox/loader.ts` - SANDBOX_CLIENT_CODE (lines 261-303)\n- `worker/src/sandbox/server.ts` - CapnWeb RPC handlers","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-20T12:35:09.110676-06:00","updated_at":"2025-12-20T12:35:09.110676-06:00","labels":["mcp","sandbox","security"],"dependencies":[{"issue_id":"todo-i28","depends_on_id":"todo-9sv","type":"blocks","created_at":"2025-12-20T12:39:35.787998-06:00","created_by":"daemon"}]}
{"id":"todo-izz","title":"Update worker to use Payload RPC binding","description":"Remove Drizzle/direct D1 access from worker. Add PAYLOAD service binding to wrangler.toml. Update all data access to use env.PAYLOAD.payload() RPC calls.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-20T09:09:31.75508-06:00","updated_at":"2025-12-20T11:35:36.878186-06:00","closed_at":"2025-12-20T11:35:36.878186-06:00","close_reason":"Updated worker to use Payload RPC binding: uncommented PAYLOAD service binding in wrangler.toml, replaced all D1 calls with Payload RPC calls, removed Better Auth dependencies, added jose for JWT validation","dependencies":[{"issue_id":"todo-izz","depends_on_id":"todo-8mg","type":"blocks","created_at":"2025-12-20T09:09:43.694384-06:00","created_by":"daemon"}]}
{"id":"todo-nkz","title":"Fix admin app type errors for Payload RPC deployment","description":"Admin app (apps/admin) has TypeScript errors preventing build/deploy. Must fix to enable Payload RPC service binding for MCP.","status":"closed","priority":0,"issue_type":"bug","assignee":"agent-1","created_at":"2025-12-20T11:41:49.811376-06:00","updated_at":"2025-12-20T11:53:19.388648-06:00","closed_at":"2025-12-20T11:53:19.388648-06:00","close_reason":"Fixed admin app type errors: getCloudflareContext signature, extended CloudflareEnv with D1/R2 bindings, fixed LinearIntegrations hidden field"}
{"id":"todo-oku","title":"docs: Architecture deep dive","description":"Comprehensive architecture documentation. Payload CMS, Worker, Durable Objects, D1, GitHub App, beads sync. Data flow diagrams.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-20T10:10:20.478791-06:00","updated_at":"2025-12-20T10:34:52.584942-06:00","closed_at":"2025-12-20T10:34:52.584942-06:00","close_reason":"Documentation written"}
{"id":"todo-omy","title":"GitHub App: Add Projects permission for roadmap sync","description":"GitHub App needs Projects read/write permission to sync roadmap.mdx with GitHub Projects. Required for milestone/epic visualization.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-20T11:05:11.326854-06:00","updated_at":"2025-12-20T11:57:12.884456-06:00","closed_at":"2025-12-20T11:57:12.884456-06:00","close_reason":"Implemented GitHub Projects integration with Projects permissions, webhook handlers, enhanced ProjectDO, and API routes"}
{"id":"todo-pia","title":"E2E: beads sync tests - local to cloud roundtrip","description":"Test bd sync pushing to GitHub, webhook triggering worker, D1 update, and sync back to local .beads/.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-20T10:45:48.750354-06:00","updated_at":"2025-12-20T11:38:51.777524-06:00","closed_at":"2025-12-20T11:38:51.777524-06:00","close_reason":"Implemented beads sync roundtrip E2E tests in tests/e2e/beads-sync-roundtrip.test.ts","dependencies":[{"issue_id":"todo-pia","depends_on_id":"todo-4wq","type":"blocks","created_at":"2025-12-20T10:46:13.68844-06:00","created_by":"daemon"}]}
{"id":"todo-q0s","title":"Implement Repo Durable Object sync logic","description":"Full sync implementation for issues and milestones in RepoDO","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-20T06:11:58.45724-06:00","updated_at":"2025-12-20T11:53:58.728906-06:00","closed_at":"2025-12-20T11:53:58.728906-06:00","close_reason":"Implemented full sync logic: GitHub API integration with JWT auth, .beads/issues.jsonl parsing, Payload RPC sync, two-way sync coordination via XState"}
{"id":"todo-q2h","title":"Migrate MCP token storage from in-memory to D1","description":"MCP OAuth tokens currently stored in Map (resets on deploy). Migrate to D1 for persistence. See remote-mcp-authkit template.","status":"closed","priority":0,"issue_type":"task","assignee":"agent-2","created_at":"2025-12-20T11:41:50.648192-06:00","updated_at":"2025-12-20T11:53:19.432773-06:00","closed_at":"2025-12-20T11:53:19.432773-06:00","close_reason":"Migrated MCP token storage to D1: created token-store.ts, migrations 0002_mcp_tokens.sql, removed in-memory Maps"}
{"id":"todo-r35","title":"WorkOS vault integration for secure token storage","description":"Store Claude JWT and GitHub tokens in WorkOS vault. Fetch at runtime for authenticated workflow execution.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-20T10:02:50.828485-06:00","updated_at":"2025-12-20T11:43:14.982537-06:00","closed_at":"2025-12-20T11:43:14.982537-06:00","close_reason":"Implemented WorkOS Vault integration: created auth/vault.ts with storeSecret/getSecret/deleteSecret for generic secrets, typed helpers for Claude JWT and GitHub tokens, and WorkflowTokenProvider class for runtime token fetching with caching. Updated auth/index.ts to export all vault functions.","dependencies":[{"issue_id":"todo-r35","depends_on_id":"todo-wwg","type":"blocks","created_at":"2025-12-20T10:03:11.698482-06:00","created_by":"daemon"}]}
{"id":"todo-ree","title":"Add .mdx/ folder convention for MDX source files","description":"Consolidate all MDX source files into .mdx/ folder to keep root clean.\n\nStructure:\n```\n.mdx/\n├── todo.mdx          → TODO.md\n├── readme.mdx        → README.md\n├── agents.mdx        → CLAUDE.md + .cursorrules + .github/copilot-instructions.md\n├── roadmap.mdx       → ROADMAP.md\n└── workflows/\n    ├── develop.mdx\n    └── standup.mdx\n```\n\nPriority order for file discovery:\n1. .mdx/ folder (recommended)\n2. Root files (TODO.mdx, etc.) for legacy/simple projects\n3. Custom path via config\n\nRemove need for separate .workflows/ folder - workflows live in .mdx/workflows/\n\nPackages to update:\n- todo.mdx: look for .mdx/todo.mdx first\n- roadmap.mdx: look for .mdx/roadmap.mdx first\n- agents.mdx: look for .mdx/agents.mdx first\n- readme.mdx: look for .mdx/readme.mdx first\n- CLI: init command creates .mdx/ folder","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-20T11:50:23.760305-06:00","updated_at":"2025-12-20T11:51:45.865478-06:00","closed_at":"2025-12-20T11:51:45.865478-06:00","close_reason":"Added .mdx/ folder convention with todo.mdx, readme.mdx, agents.mdx, roadmap.mdx, and workflows/"}
{"id":"todo-sfc","title":"Create apps/agents.mdx.do - Fumadocs + OpenNext site","description":"Next.js docs site for agents.mdx package using Fumadocs. Deploy with OpenNext to Cloudflare. Includes /dashboard from shared package.","status":"closed","priority":1,"issue_type":"task","assignee":"subagent-4","created_at":"2025-12-20T10:41:04.976657-06:00","updated_at":"2025-12-20T11:03:15.460525-06:00","closed_at":"2025-12-20T11:03:15.460525-06:00","close_reason":"Completed - Created complete Next.js site with Fumadocs, OpenNext Cloudflare config, WorkOS AuthKit setup, and dashboard integration. All required files created including app structure, configuration files, and initial documentation content.","dependencies":[{"issue_id":"todo-sfc","depends_on_id":"todo-wny","type":"blocks","created_at":"2025-12-20T10:41:18.313877-06:00","created_by":"daemon"}]}
{"id":"todo-uuh","title":"Create apps/todo.mdx.do from Payload D1 template","description":"Initialize apps/todo.mdx.do from https://github.com/payloadcms/payload/tree/main/templates/with-cloudflare-d1. Configure for D1 database. Set up basic Payload config.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-20T09:09:25.918968-06:00","updated_at":"2025-12-20T09:14:15.358458-06:00","closed_at":"2025-12-20T09:14:15.358458-06:00","close_reason":"Created apps/todo.mdx.do from Payload D1 template with Next.js 15, Payload 3.69, D1 + R2 support","dependencies":[{"issue_id":"todo-uuh","depends_on_id":"todo-atz","type":"blocks","created_at":"2025-12-20T09:09:43.079618-06:00","created_by":"daemon"}]}
{"id":"todo-vm0","title":"Workflow MDX parser - extract TypeScript from code blocks","description":"Parse .workflows/*.mdx files and extract TypeScript code from code blocks. Compile to executable workflow modules.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-20T10:02:36.316748-06:00","updated_at":"2025-12-20T10:15:04.785676-06:00","closed_at":"2025-12-20T10:15:04.785676-06:00","close_reason":"Implemented workflow MDX parser with TypeScript code block extraction. Added parser.ts, compiler.ts, proxy-api.ts with full type definitions. All 21 tests pass."}
{"id":"todo-vr3","title":"agents.mdx: Autonomous Workflow Engine","description":"Enable autonomous development through MDX-defined workflows. Cloudflare Workflows for durability, CapnWeb for sandboxing, Sandbox for Claude Code execution.","notes":"Infrastructure implemented: CLI (auth, watch), workflow daemon, Cloudflare Workflows integration, runtime/transport system. Package builds successfully. Ready for integration testing.","status":"in_progress","priority":1,"issue_type":"epic","created_at":"2025-12-20T10:02:07.676057-06:00","updated_at":"2025-12-20T11:31:32.151086-06:00"}
{"id":"todo-wny","title":"Create packages/dashboard shared UI package","description":"Shared dashboard components and routes for all package sites. Exports /dashboard/[[...path]] route handler and UI components.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-20T10:40:57.198595-06:00","updated_at":"2025-12-20T10:55:36.774792-06:00","closed_at":"2025-12-20T10:55:36.774792-06:00","close_reason":"Dashboard package complete"}
{"id":"todo-wwg","title":"oauth.do auth flow for agents.mdx CLI","description":"'agents.mdx auth' command that authenticates via oauth.do, generates Claude Code JWT, stores in WorkOS vault.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-20T10:02:52.884806-06:00","updated_at":"2025-12-20T11:07:10.534424-06:00","closed_at":"2025-12-20T11:07:10.534424-06:00","close_reason":"Implemented OAuth authentication flow for agents.mdx CLI with local token storage, browser-based auth flow via oauth.do, and comprehensive token management utilities."}
{"id":"todo-xhu","title":"docs: cli.mdx framework guide","description":"Guide for building CLIs with cli.mdx. MDX-based CLI framework with Bun + React (Ink-style). Component library, rendering to terminal and markdown.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-20T10:10:15.587834-06:00","updated_at":"2025-12-20T11:50:22.606179-06:00","closed_at":"2025-12-20T11:50:22.606179-06:00","close_reason":"Comprehensive cli.mdx documentation written to docs/cli-mdx.mdx. Covers installation, quick start, concepts, all components, CLI commands, configuration, examples (interactive CLI, docs generator, AI context, TODO management), integration with other packages, TypeScript support, and advanced usage patterns."}
{"id":"todo-xmf","title":"Local workflow daemon - watch mode and event handling","description":"CLI command 'workflows watch' that monitors .workflows/ and beads events, executes workflows locally.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-20T10:02:40.05462-06:00","updated_at":"2025-12-20T11:15:45.092579-06:00","closed_at":"2025-12-20T11:15:45.092579-06:00","close_reason":"Implemented local workflow daemon with watch mode - WorkflowDaemon class watches .workflows/*.mdx files and beads events, executes handlers via proxy runtime","dependencies":[{"issue_id":"todo-xmf","depends_on_id":"todo-vm0","type":"blocks","created_at":"2025-12-20T10:03:10.49733-06:00","created_by":"daemon"},{"issue_id":"todo-xmf","depends_on_id":"todo-6bv","type":"blocks","created_at":"2025-12-20T10:03:10.654482-06:00","created_by":"daemon"},{"issue_id":"todo-xmf","depends_on_id":"todo-8fq","type":"blocks","created_at":"2025-12-20T10:03:10.809251-06:00","created_by":"daemon"}]}
{"id":"todo-y20","title":"docs: claude.mdx CLI reference","description":"Documentation for claude.mdx CLI. Dispatching Claude Code sessions for TODOs. Authentication, session management.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-20T10:10:18.826729-06:00","updated_at":"2025-12-20T11:50:11.225801-06:00","closed_at":"2025-12-20T11:50:11.225801-06:00","close_reason":"Comprehensive documentation written covering all CLI commands, session management, beads integration, configuration, daemon mode, programmatic usage, and examples"}
