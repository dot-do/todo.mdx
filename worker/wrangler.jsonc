{
  "$schema": "node_modules/wrangler/config-schema.json",
  "name": "todo-mdx",
  "account_id": "b6641681fe423910342b9ffa1364c76d", // .do account
  "main": "src/index.ts",
  "compatibility_date": "2024-12-01",
  "compatibility_flags": ["nodejs_compat"],

  // Workers AI for voice
  "ai": {
    "binding": "AI"
  },

  // D1 Database for app installs and DO registry
  "d1_databases": [
    {
      "binding": "DB",
      "database_name": "todo-mdx",
      "database_id": "7773cb8c-af79-4ae9-8473-342acbbc0444",
      "migrations_dir": "migrations"
    }
  ],

  // Durable Objects
  "durable_objects": {
    "bindings": [
      { "name": "REPO", "class_name": "RepoDO" },
      { "name": "PROJECT", "class_name": "ProjectDO" }
    ]
  },

  "migrations": [
    {
      "tag": "v1",
      "new_sqlite_classes": ["RepoDO", "ProjectDO"]
    }
  ],

  // Cloudflare Workflows
  "workflows": [
    {
      "binding": "DEVELOP_WORKFLOW",
      "name": "develop-workflow",
      "class_name": "DevelopWorkflow"
    }
  ],

  // Service Bindings - Payload RPC
  "services": [
    {
      "binding": "PAYLOAD",
      "service": "admin-todo-mdx",
      "entrypoint": "PayloadRPC"
    }
  ],

  // KV namespace for OAuth state
  "kv_namespaces": [
    {
      "binding": "OAUTH_KV",
      "id": "replace-with-kv-namespace-id"
    }
  ],

  // Environment variables (set via wrangler secret)
  // GitHub App: GITHUB_APP_ID, GITHUB_PRIVATE_KEY, GITHUB_WEBHOOK_SECRET
  // WorkOS AuthKit: WORKOS_API_KEY, WORKOS_CLIENT_ID, WORKOS_CLIENT_SECRET
  // OAuth: OAUTH_DO_CLIENT_ID, OAUTH_DO_ISSUER
  // Linear: LINEAR_CLIENT_ID, LINEAR_CLIENT_SECRET, LINEAR_WEBHOOK_SECRET
  // AI: ANTHROPIC_API_KEY
  // Future - Slack: SLACK_BOT_TOKEN, SLACK_SIGNING_SECRET
}
